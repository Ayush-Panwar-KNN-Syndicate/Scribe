name = "searchtermux-search-worker"
main = "dist/worker.js"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]
account_id = "a14c93148d0115ba3ab3cd488c8c0b06"

# API-only subdomain - Worker handles only API requests
[[routes]]
pattern = "api.topreserchtopics.com/*"
zone_name = "topreserchtopics.com"

[env.dev]
vars = { ALLOWED_ORIGINS = "http://localhost:3000,https://localhost:3000,http://127.0.0.1:3000,https://pub-47192a9712a3462ba44953b639a4d2e8.r2.dev,https://search.topreserchtopics.com,https://searchtermux-search-worker-dev.tech-knnsyndicate.workers.dev" }

[[env.dev.kv_namespaces]]
binding = "RATE_LIMIT_KV"
id = "e1ea4c8cffba4e7d817b346446251e1b"

# Production environment
[env.production]
vars = { ALLOWED_ORIGINS = "https://search.topreserchtopics.com,https://topreserchtopics.com,https://www.topreserchtopics.com" }

[[env.production.kv_namespaces]]
binding = "RATE_LIMIT_KV"
id = "e3b40ffaa7c84327b3e2925d23f14236"

# Secrets (set using wrangler secret put command)
# REDDIT_CLIENT_ID = "your-reddit-client-id" (secret, not stored in this file)
# REDDIT_CLIENT_SECRET = "your-reddit-client-secret" (secret, not stored in this file)  
# UPSTASH_REDIS_REST_URL = "your-upstash-redis-url" (secret, not stored in this file)
# UPSTASH_REDIS_REST_TOKEN = "your-upstash-redis-token" (secret, not stored in this file)

# Optional: Custom domain routing (configure after deployment)
# [route]
# pattern = "search.yourdomain.com/*"
# zone_name = "yourdomain.com" 
 